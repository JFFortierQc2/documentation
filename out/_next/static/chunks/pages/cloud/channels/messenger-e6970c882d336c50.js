(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2296],{9457:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cloud/channels/messenger",function(){return o(3224)}])},3224:function(e,n,o){"use strict";o.r(n);var s=o(1527),i=o(452),r=o(6736);function t(e){let n=Object.assign({h1:"h1",p:"p",img:"img",h2:"h2",h3:"h3",a:"a",strong:"strong",ol:"ol",li:"li",code:"code"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Messenger"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/docs/content/messenger-banner.png",alt:"Messaging channels"})}),"\n",(0,s.jsx)("iframe",{"data-youtube-iframe":!0,width:"720",height:"360",src:"https://www.youtube.com/embed/pOIrLMpZZqc",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(n.p,{children:"You will need a Facebook app and a Facebook page to connect you bot to messenger"}),"\n",(0,s.jsx)(n.h2,{id:"enabling-messenger-in-botpress-cloud-dashboard",children:"Enabling Messenger in Botpress Cloud Dashboard"}),"\n",(0,s.jsx)(n.p,{children:"Go to the chatbot settings in your cloud dashboard and enable messenger. We will get the APP ID, App Secret, Verify Token, Page ID and Access Token from the following steps."}),"\n",(0,s.jsx)(n.h3,{id:"create-a-facebook-app",children:"Create a Facebook App"}),"\n",(0,s.jsxs)(n.p,{children:["To create a Facebook App, log in to your Facebook account and go to the ",(0,s.jsx)(n.a,{href:"https://developers.facebook.com/",children:"Facebook for Developers website"}),". Select ",(0,s.jsx)(n.strong,{children:"My Apps"})," from the top menu, and create a new app. For more details and assistance, visit the ",(0,s.jsx)(n.a,{href:"https://developers.facebook.com/docs/development",children:"Facebook developer documentation"})]}),"\n",(0,s.jsx)(n.h3,{id:"create-a-facebook-page",children:"Create a Facebook Page"}),"\n",(0,s.jsxs)(n.p,{children:["If you do not already have a Facebook page you will need to create one. ",(0,s.jsx)(n.a,{href:"https://www.facebook.com/pages/creation/",children:"You can find details on how to create a new Facebook page here"})]}),"\n",(0,s.jsx)(n.p,{children:"To link your chatbot to a pre-existing page, you must have an administrator or developer role"}),"\n",(0,s.jsx)(n.h2,{id:"channel-configuration",children:"Channel Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"api-version",children:"API version"}),"\n",(0,s.jsx)(n.p,{children:"The messenger channel is made to interact with version 12.0 or higher of the Messenger API. It is not the default version so it must be changed in your app's settings"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Go to your Facebook App"}),"\n",(0,s.jsxs)(n.li,{children:["In the left sidebar, expand the ",(0,s.jsx)(n.strong,{children:"Settings"})," menu and select ",(0,s.jsx)(n.strong,{children:"Advanced"})]}),"\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Upgrade API version"})," section, select v12.0 or higher as the API version"]}),"\n",(0,s.jsxs)(n.li,{children:["Click on ",(0,s.jsx)(n.strong,{children:"Save changes"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"add-messenger-product",children:"Add Messenger Product"}),"\n",(0,s.jsx)(n.p,{children:"Messenger is not added by default in your Facebook App, so it must be added manually"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the left sidebar, click on ",(0,s.jsx)(n.strong,{children:"Add Product"})]}),"\n",(0,s.jsxs)(n.li,{children:["In the Facebook Messenger section click ",(0,s.jsx)(n.strong,{children:"Set Up"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"app-id-and-secret",children:"App Id and Secret"}),"\n",(0,s.jsx)(n.p,{children:"The app id and secret are used to validate webhook requests"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the left sidebar, expand the ",(0,s.jsx)(n.strong,{children:"Settings"})," menu and select ",(0,s.jsx)(n.strong,{children:"Basic"}),". Here you can find the App ID and App Secret"]}),"\n",(0,s.jsxs)(n.li,{children:["Click on the ",(0,s.jsx)(n.strong,{children:"Show"})," button in the ",(0,s.jsx)(n.strong,{children:"App Secret"})," text box. Copy the App Id and App Secret to your channel configuration"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"page-id-and-access-token",children:"Page Id and Access Token"}),"\n",(0,s.jsx)(n.p,{children:"The page id and access token are used to send messages to the Messenger API"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the left sidebar, expand the ",(0,s.jsx)(n.strong,{children:"Messenger"})," menu and select ",(0,s.jsx)(n.strong,{children:"Settings"})]}),"\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Access Tokens"})," section, click ",(0,s.jsx)(n.strong,{children:"Add or remove Pages"})," and add you facebook page"]}),"\n",(0,s.jsxs)(n.li,{children:["Copy the number under you page name and paste it in you ",(0,s.jsx)(n.strong,{children:"Page Id"})," channel configuration"]}),"\n",(0,s.jsxs)(n.li,{children:["Click on ",(0,s.jsx)(n.strong,{children:"Generate token"}),". Copy this token and paste it in the ",(0,s.jsx)(n.strong,{children:"Access Token"})," channel configuration"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"verify-token",children:"Verify Token"}),"\n",(0,s.jsx)(n.p,{children:"The verify token is used by facebook to verify that you are the real owner of the provided webhook"}),"\n",(0,s.jsxs)(n.p,{children:["You can generate any random alphanumerical string for this configuration. Paste it in your ",(0,s.jsx)(n.strong,{children:"Verify Token"})," channel configuration"]}),"\n",(0,s.jsx)(n.h3,{id:"save-configuration",children:"Save Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Channel configuration is complete, you can now click ",(0,s.jsx)(n.strong,{children:"Save"}),". It is important you save your configuration before configuring the webhook, otherwise Messenger will be unable to validate the webhook url"]}),"\n",(0,s.jsx)(n.h2,{id:"webhook-configuration",children:"Webhook Configuration"}),"\n",(0,s.jsx)(n.p,{children:"To receive messages from Messenger, you will need to setup a webhook"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Go to your Facebook App."}),"\n",(0,s.jsxs)(n.li,{children:["In the left sidebar, expand the ",(0,s.jsx)(n.strong,{children:"Messenger"})," menu and select ",(0,s.jsx)(n.strong,{children:"Settings"})]}),"\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Webhooks"})," section, click ",(0,s.jsx)(n.strong,{children:"Add Callback URL"})]}),"\n",(0,s.jsx)(n.li,{children:"Copy paste the webhook url provided in the channel configuration UI"}),"\n",(0,s.jsx)(n.li,{children:"Copy paste the verify token you generated earlier"}),"\n",(0,s.jsxs)(n.li,{children:["Click on ",(0,s.jsx)(n.strong,{children:"Verify and save"}),". Make sure your channel configuration was saved before doing this step, otherwise the webhook validation will fail"]}),"\n",(0,s.jsxs)(n.li,{children:["Click on ",(0,s.jsx)(n.strong,{children:"Add subscriptions"})," and add ",(0,s.jsx)(n.code,{children:"messages"})," and ",(0,s.jsx)(n.code,{children:"messaging_postbacks"})," to your webhook"]}),"\n"]})]})}o(8027),n.default=(0,i.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)},pageOpts:{filePath:"pages/cloud/channels/messenger.mdx",route:"/cloud/channels/messenger",headings:[{depth:1,value:"Messenger",id:"messenger"},{depth:2,value:"Requirements",id:"requirements"},{depth:2,value:"Enabling Messenger in Botpress Cloud Dashboard",id:"enabling-messenger-in-botpress-cloud-dashboard"},{depth:3,value:"Create a Facebook App",id:"create-a-facebook-app"},{depth:3,value:"Create a Facebook Page",id:"create-a-facebook-page"},{depth:2,value:"Channel Configuration",id:"channel-configuration"},{depth:3,value:"API version",id:"api-version"},{depth:3,value:"Add Messenger Product",id:"add-messenger-product"},{depth:3,value:"App Id and Secret",id:"app-id-and-secret"},{depth:3,value:"Page Id and Access Token",id:"page-id-and-access-token"},{depth:3,value:"Verify Token",id:"verify-token"},{depth:3,value:"Save Configuration",id:"save-configuration"},{depth:2,value:"Webhook Configuration",id:"webhook-configuration"}],timestamp:1687979724e3,title:"Messenger"},pageNextRoute:"/cloud/channels/messenger"})}},function(e){e.O(0,[452,9774,2888,179],function(){return e(e.s=9457)}),_N_E=e.O()}]);